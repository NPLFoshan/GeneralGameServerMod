<template>
    <!-- <div style="height:522px; width: 334px; background:url(Texture/Aries/Creator/keepwork/ggs/user/renwukuang_334X522_32bits.png#0 0 334 522:10 10 10 10);"> -->
        <div style="margin-top: 11px; margin-left: 13px; height:522px; width: 334px; background:url(Texture/Aries/Creator/keepwork/ggs/user/renwukuangbj_334X522_32bits.png#0 0 334 522:10 10 10 10);">
            <div style="height: 290px;">
                <div style="margin-top: 12px; text-align: center;">
                    <div style="display: inline; font-size: 18px; base-font-size: 18px; color: #ffffff; shadow-quality:8; shadow-color:#000000; text-shadow:true;">逍遥</div>
                </div>
                <pe:mc_player align="center" name="player" miniscenegraphname="AvatarMyselfTabCharacter" style="margin-top:-90px; width:330px; height:330px;" isinteractive="false" />
            </div>
            <div align="center" style="padding-left: 4px; height: 220px; width: 316px; background: url(Texture/Aries/Creator/keepwork/ggs/user/kuang_316X220_32bits.png#0 0 316 220)">
                <div style="margin-top: 20px; height: 38px; width: 310px; background-color: #c1c2c2; font-size: 14px; base-font-size: 14px; color: #313131;">
                    <div style="display: inline; width: 154px; height:38px;">
                        <div align="center" style="display: inline; height:38px;">
                            <div valign="center" style="display: inline; padding-right: 5px;">0</div>
                            <div valign="center" style="display: inline; width:34px; height: 16px; background: url(Texture/Aries/Creator/keepwork/ggs/user/zi_guangzhu_34X16_32bits.png#0 0 34 16);"></div>
                        </div>
                    </div>
                    <div style="display: inline; width: 1px; height: 38px; background: url(Texture/Aries/Creator/keepwork/ggs/user/fengexian_1X45_32bits.png#0 0 1 45);"></div>
                    <div style="display: inline; width: 154px; height:38px;">
                        <div align="center" style="display: inline; height:38px;">
                            <div valign="center" style="display: inline; padding-right: 5px;">0</div>
                            <div valign="center" style="display: inline; width:34px; height: 15px; background: url(Texture/Aries/Creator/keepwork/ggs/user/zi_fensi_34X15_32bits.png#0 0 34 15);"></div>
                        </div>
                    </div>
                </div>
                <div style="padding-left: 10px; font-size: 14px; base-font-size: 14px; color: #323232;">
                    <div style="margin-top: 10px; height: 24px;">
                        <div style="position: relative; width: 70px; height: 24px; display: inline;">
                            <div style="position: absolute; left: 0px; top: 0px; display: inline; width: 70px; height: 24px; background: url(Texture/Aries/Creator/keepwork/ggs/user/kuangzidi_70X24_32bits.png#0 0 70 24);"></div>
                            <div style="position: absolute; left: 18px; top: 4px; display: inline; width: 34px; height: 16px; background: url(Texture/Aries/Creator/keepwork/ggs/user/zi_zhanghao_34X16_32bits.png#0 0 34 16);"></div>
                        </div>
                        <div  style="display: inline; padding-left:10px; height: 24px; line-height: 24;">{{username}}</div>
                    </div>
                    <div style="margin-top: 16px; height: 24px;">
                        <div style="position: relative; width: 70px; height: 24px; display: inline;">
                            <div style="position: absolute; left: 0px; top: 0px; display: inline; width: 70px; height: 24px; background: url(Texture/Aries/Creator/keepwork/ggs/user/kuangzidi_70X24_32bits.png#0 0 70 24);"></div>
                            <div style="position: absolute; left: 18px; top: 4px; display: inline; width: 32px; height: 15px; background: url(Texture/Aries/Creator/keepwork/ggs/user/zi_shengri_32X15_32bits.png#0 0 32 15);"></div>
                        </div>
                        <div  style="display: inline; padding-left:10px; height: 24px; line-height: 24;">{{registerAt}}</div>
                    </div>
                    <div style="margin-top: 16px; height: 24px;">
                        <div style="position: relative; width: 70px; height: 24px; display: inline;">
                            <div style="position: absolute; left: 0px; top: 0px; display: inline; width: 70px; height: 24px; background: url(Texture/Aries/Creator/keepwork/ggs/user/kuangzidi_70X24_32bits.png#0 0 70 24);"></div>
                            <div style="position: absolute; left: 18px; top: 4px; display: inline; width: 34px; height: 17px; background: url(Texture/Aries/Creator/keepwork/ggs/user/zi_xuexiao_34X17_32bits.png#0 0 34 17);"></div>
                        </div>
                        <div  style="display: inline; padding-left:10px; height: 24px; line-height: 24;">000000</div>
                    </div>
                    <div style="margin-top: 16px; height: 24px;">
                        <div style="position: relative; width: 70px; height: 24px; display: inline;">
                            <div style="position: absolute; left: 0px; top: 0px; display: inline; width: 70px; height: 24px; background: url(Texture/Aries/Creator/keepwork/ggs/user/kuangzidi_70X24_32bits.png#0 0 70 24);"></div>
                            <div style="position: absolute; left: 10px; top: 4px; display: inline; width: 50px; height: 16px; background: url(Texture/Aries/Creator/keepwork/ggs/user/zi_zhishidou_50X16_32bits.png#0 0 50 16);"></div>
                        </div>
                        <div  style="display: inline; padding-left:10px; height: 24px; line-height: 24;">000000</div>
                    </div>
                </div>
            </div>
        </div>    
    <!-- </div> -->
    <!-- <div style="width:100px; height:100px; background-color:#ff0000"></div> -->
</template>

<script type="text/lua">
UserDetail = UserDetail or {username = "username", createdAt = "2020-01-01", rank = {}};
UserDetail.rank = UserDetail.rank or {};
self.userId = UserDetail.id;
self.username = UserDetail.username;
self.isFollow = UserDetail.isFollow or false;
self.follow = UserDetail.rank.follow or 0;
self.fans = UserDetail.rank.fans or 0;
-- 格式化注册时间
local datetime = UserDetail.createdAt;
local year, month, day = commonlib.timehelp.GetYearMonthDayFromStr(datetime);
self.registerAt = tostring(year) .. "." .. tostring(month) .. "." .. tostring(day);

-- 点击关注
function ClickFollow()
    -- if (not GetUserInfo():IsSignedIn()) then  return echo("未登录"); end
    if (self.isFollow) then
        self.fans = self.fans - 1;
        keepwork.user.unfollow({
            objectType = 0,
            objectId = self.userId,
        }, function(status, msg, data)
            -- self.fans = self.fans - 1;
        end);
    else
        self.fans = self.fans + 1;
        keepwork.user.unfollow({
            objectType = 0,
            objectId = self.userId,
        }, function(status, msg, data)
            -- self.fans = self.fans + 1;
        end);
    end
    self.isFollow = not self.isFollow;
end
</script>