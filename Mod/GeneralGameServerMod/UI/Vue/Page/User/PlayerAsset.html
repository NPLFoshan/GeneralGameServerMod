<template style="width: 100%; padding: 6px;">
    <div v-for="asset, key in PlayerAssetList" class="asset-container" onclick=ClickPlayerAsset(asset)>
        <div v-bind:style="AssetStyle(asset)"></div>
        <div class="use-btn"></div>
    </div>
</template>

<script type="text/lua">
local EntityManager = commonlib.gettable("MyCompany.Aries.Game.EntityManager");

<!-- PlayerAssetList = GetUserAssets(); -->
PlayerAssetList = {
    {
        id = 1,
        icon = "Texture/Aries/Creator/keepwork/ggs/user/renwuqiehuan/nan_108X176_32bits.png#0 0 108 176",
        modelUrl = "character/CC/02human/paperman/boy01.x",
    },
    {
        id = 2,
        icon = "Texture/Aries/Creator/keepwork/ggs/user/renwuqiehuan/nan_108X176_32bits.png#0 0 108 176",
        modelUrl = "character/CC/02human/paperman/boy02.x",
    },
    {
        id = 3,
        icon = "Texture/Aries/Creator/keepwork/ggs/user/renwuqiehuan/nan_108X176_32bits.png#0 0 108 176",
        modelUrl = "character/CC/02human/paperman/boy03.x",
    },
    {
        id = 4,
        icon = "Texture/Aries/Creator/keepwork/ggs/user/renwuqiehuan/nan_108X176_32bits.png#0 0 108 176",
        modelUrl = "character/CC/02human/paperman/boy04.x",
    },
};

local function ChangePlayerAsset(assetfile)
	assetfile = EntityManager.PlayerAssetFile:GetValidAssetByString(assetfile);
	local playerEntity = GameLogic.GetPlayerController():GetPlayer();
	if(assetfile and assetfile~=playerEntity:GetMainAssetPath()) then
		local oldAssetFile = playerEntity:GetMainAssetPath()
		if(playerEntity.SetModelFile) then
			playerEntity:SetModelFile(assetfile);
		else
			playerEntity:SetMainAssetPath(assetfile);
        end
        GameLogic.options:SetMainPlayerAssetName(assetfile);
		-- this ensure that at least one default skin is selected
		if(playerEntity:GetSkin()) then
			playerEntity:SetSkin(nil);
		else
			playerEntity:RefreshSkin();
		end
		if(math.abs(EntityManager.PlayerAssetFile:GetDefaultScale(oldAssetFile) - playerEntity:GetScaling()) < 0.01) then
			playerEntity:SetScaling(EntityManager.PlayerAssetFile:GetDefaultScale(assetfile))
		end
	end
end 

function ClickPlayerAsset(asset)
    ChangePlayerAsset(asset.modelUrl);
    UpdatePlayerEntityInfo();
end

function AssetStyle(asset)
    return string.format("width: 108px; height: 176px; background:url(%s)", asset.icon);
end

function OnAttrValueChange()
end
</script>

<style>
.asset-container {
    display: inline-flex; 
    justify-content: center;
    align-items: center;
    width: 174px; 
    height: 235px; 
    margin-right: 20px;
    /* border: 1px solid #ff0000; */
    background:url(Texture/Aries/Creator/keepwork/ggs/user/renwuqiehuan/renwubj_174X235_32bits.png#0 0 174 235);
}
.asset-container:hover {
    background:url(Texture/Aries/Creator/keepwork/ggs/user/renwuqiehuan/renwubj2_174X235_32bits.png#0 0 174 235);
}

.use-btn {
    visibility: hidden;
    position: absolute; 
    right: 15px; 
    bottom: 15px; 
    width: 30px; 
    height: 14px; 
    background: url(Texture/Aries/Creator/keepwork/ggs/user/renwuqiehuan/zi_shiyong_30X14_32bits.png#0 0 30 14);
}

.asset-container:hover .use-btn {
    visibility: visible;
}
</style>