
# 图块编程

图块编程是一种抽象编程, 是计算机语言的一种表现形式. 未来计算机抽象语言也必然会和汉语, 英语一样成为人人必会的常识技能. 然而语言最长见的便是句子, 对应的便是图块编程里的一个图块.

句子常为服务于人类生活而生, 虽无穷尽, 但实际使用还是比较常见的一些可枚举的. 因此我们也只需提供为产品服务的一些常用的功能模块即可为产品带来丰富多样性和灵活性.

## 特性

- 扩展性, 方便衍生新的图块
- 易用性, 使用简单

## 功能点

- 图块搜索
- 文件浏览器

## 用法

- 在世界目录新建一个自动加载目录, 类似window程序自启动, 将xml文件存于其中, 世界加载后自动加载运行xml文件

## 编程

编程主要是智能编程或图块编程, 编程可以让世界更加真实有趣. 也是学习编程的基础功能, 此功能要做的比较可用需依赖一下功能:

[x--] 基本UI框架 mcml2 已有, 但性能和可扩展性不好. 很多css属性控制的东西全用html属性去控制, 页面布局写的比较难理解而且支持的布局方式很弱, 最致命就任何数据更新基本都需要刷新整个页面
[x--] 基于 mcml2 可用性, 需要构建一套比较优基础UI框架, 目前已重构部分, 不依赖mcml2已实现窗口基本功能, 还需实现Scroll, Input, ClassStyle, 新框架不会refesh和重新加载元素, 根据样式变化更新部分元素布局甚至不更新布局(只有影响布局的样式改更才布局)
[x--] 基于基础UI框架构建一套高级通用的UI组件库和框, 目前基于Vue和ElementUI思路实现. 基于旧的mcml2已实现基本可用的vue框架, 可较短时间切换新的基础UI框架, 高级UI组件库暂无
[x] 拖拽元素构建UI, 提高开发效果, 可选
[x--] 图块编程工具, 目前基于 scratch 定制差, 需要启动内置浏览器, 体验性差.  
[x--] 基于图块编程或拖拽编程实现智能化编程, 有效快速完成自定义UI显示以及世界里相关可以代码的控制的方块与人物

## TODO

[x] 图块外框
[x] 代码生成
[x] 不在视图内 不渲染 不然性能比较差
[x] 撤销与恢复
[ ] 兼容blockly 难度系数大(实现不同导致序列化存贮的数据不同, 格式也不同) 浏览器版本是否可以重写blockly,  毕竟blockly不开源使用难度大
[ ] 对象编辑
[x] 代码块
[ ] 自启动
[x] 字段验证器
[x] 可变输入
[x] 自动转换旧块的定义

## 测试

[x] 输入需要支持光标移走即保存
[x] 要生成图块对应的代码供用户查看
[x] 部分图块的形状需要与之前的保持一致，便于用户理解（如，控制-循环）
[x] 取消NPL图块勾选后，来回切换图块还显示不对的问题  未知问题
[ ] 需要支持右键菜单操作
[x] 需要支持ctrl+y/ctrl+z的快捷键操作
[x] 需要支持图块放大/缩小及回收站功能
[ ] UI界面还需要美化
[x] Cad 孙子兵法图块支持
[x] blockly 内部更新事件回调
[x] 录制与播放不同分辨率位置错乱, 分辨率各种回调处理顺序不一致造成, 需要控制处理需顺序, window 先处理, trigger后处理.
[x] 渲染性能优化
[x] 宏示教优化, 增加语音字幕讲解, 增加宏增删改合并等操作, 文字输入等待卡顿优化
